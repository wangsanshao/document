## 跨站点脚本攻击

xss攻击通常指的是通过利用网页开发式留下的漏洞，通过巧妙的注入恶意指令代码到网页，使用户加载并执行攻击者恶意制造的网页程序。


### 简述
跨站点脚本攻击，缩写为xss。是一种常见的web安全漏洞。

这类漏洞能够使得攻击者嵌入恶意脚本代码到正常用户会访问到的页面中，当用户正常访问该页面时，则可能导致恶意代码的执行，从而达到恶意攻击用户的目的。

攻击者可以使用用户在浏览器中执行其预先定义的恶意搅拌，器导致的危害可想而知，如，劫持用户会话，插入恶意内容，重定向用户，使用恶意软件劫持用户浏览器，繁殖XSS蠕虫，甚至破坏网站，修改路由器配置信息等。


### 原理

html 是一种超文本标记语言，其实就是将一些字符特殊对待来区分文本和标记，例如小于符号 `<` 和大于符号 `>` 就是标记，而 `<p>` 和 `</p>` 就是标记对。 小于符号 `<` 和大于符号 `>` 是HTML标记语言中用于标记开始和结束的符号。当页面懂爱插入内容含有这些特殊字符的时候，浏览器会将这些特殊字符误认为是插入了HTML，让插入的是javascript脚本的时候，脚本就会在浏览器里面执行。所以这些特殊字符不能被动态页面检查出来或者检查失误时，就会产生xss漏洞。

### 类型
- 反射型
- 存储型
- 基于DOM

### 攻击例子
- 盗用cookie，获取敏感信息。
- 利用植入FLash，通过crossdomain权限设置进一步获取更高权限。
- 利用iframe、frame、XMLHttpRequest或上述Flash等方式，以（被攻击）用户的身份执行一些管理动作，或执行一些一般的如发微博、加好友、发私信等操作。
- 利用可被攻击的域受到其他域信任的特点，以受信任来源的身份请求一些平时不允许的操作，如进行不当的投票活动。
- 在访问量极大的一些页面上的XSS可以攻击一些小型网站，实现DDoS攻击的效果。


### 防御措施
- 针对用户输入做好过滤和转义处理，避免直接执行作为脚本代码。
- 使用http-only属性，禁止javascript脚本访问敏感的cookie。
- 使用内容安全策略（CSP），限制页面资源的加载和执行。
- 使用低特权账号和权限分离策略，避免敏感操作的恶意执行和篡改页面内容。